import{createPersistentPort}from"./chunk-ODNERRIQ.js";import"./chunk-G7AOUSAZ.js";import{usePostMessaging}from"./chunk-QYJXY7GZ.js";import{createEndpointRuntime,createStreamWirings}from"./chunk-4J4II3XU.js";import"./chunk-YWICFM2F.js";var win=usePostMessaging("content-script"),port=createPersistentPort(),endpointRuntime=createEndpointRuntime("content-script",(e=>{"window"===e.destination.context?win.postMessage(e):port.postMessage(e)}));function allowWindowMessaging(e){win.setNamespace(e),win.enable()}win.onMessage((e=>{endpointRuntime.handleMessage(Object.assign({},e,{origin:{context:"window",tabId:null}}))})),port.onMessage(endpointRuntime.handleMessage),port.onFailure((e=>{"window"!==e.origin.context?endpointRuntime.endTransaction(e.transactionId):win.postMessage({type:"error",transactionID:e.transactionId})}));var{sendMessage,onMessage}=endpointRuntime,{openStream,onOpenStreamChannel}=createStreamWirings(endpointRuntime);export{allowWindowMessaging,onMessage,onOpenStreamChannel,openStream,sendMessage};